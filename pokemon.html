<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background-color: black;
            color: white;
            font-family: 'Press Start 2P', cursive; /* Aggiunto un font in stile Pokémon */
            text-align: center;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        h1 {
            color: #FFD700; /* Colore dorato per l'header */
        }

        h2 {
            margin: 0;
        }

        label {
            font-size: 18px;
            margin-right: 10px;
        }

        #bonusSelect, .button {
            font-size: 16px;
            padding: 8px;
            border: 2px solid #FFD700; /* Bordo dorato */
            border-radius: 5px;
            background-color: #4C4C4C; /* Colore grigio scuro */
            color: white;
            /* margin-top: 10px; */
            cursor: pointer;
            font-family: 'Press Start 2P', cursive;
        }

        .button {
            margin: 20px;
        }

        .button:hover, #bonusSelect:hover {
            background-color: #666; /* Cambia colore al passaggio del mouse */
        }

        .bonusDiv {
            cursor: pointer;
            border: 2px solid #FFD700; /* Bordo dorato */
            padding: 10px;
            margin-bottom: 10px;
            width: 300px; /* Larghezza fissa per i bonus */
            display: flex; /* Utilizza il modello di flessbox */
            justify-content: space-between; /* Allineamento dei figli ai margini opposti */
            align-items: center; /* Allineamento verticale al centro */
            background-color: #4C4C4C; /* Colore grigio scuro */
            color: white;
            position: relative; /* Posizione relativa per consentire il posizionamento assoluto */
        }

        .bonusArrow {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }

        #punteggioContainer {
            display: flex;
            align-items: center;
            margin-top: 20px;
            gap: 20px;
            align-items: center;
            justify-content: center;
        }

        #punteggio {
            font-size: 24px;
            /* margin: 0 10px; */
        }

        .flex-main {
            display: flex;
            flex-direction: column;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"> <!-- Aggiunto un font in stile Pokémon -->
    <title>Pokemon Tracker</title>
</head>
<body>

    <h1>Pokemon Tracker</h1>

    <p style="font-size: 14px; max-width: 700px; line-height: 16px;">Benvenuto al Pokemon Tracker! Questo programma ti permette di tenere traccia dei tuoi progressi e bonus durante il gioco dei Pokémon con i tuoi amici. Segui i passaggi seguenti:</p>

    <ol style="font-size: 14px; max-width: 700px;">
        <li style="margin-bottom: 8px; line-height: 16px;">Seleziona un bonus dal menu a tendina.</li>
        <li style="margin-bottom: 8px; line-height: 16px;">Clicca su "Aggiungi Bonus in Pagina" per visualizzare il bonus selezionato.</li>
        <li style="margin-bottom: 8px; line-height: 16px;">Clicca sul bonus visualizzato per aggiungere i punti al tuo punteggio totale.</li>
        <li style="margin-bottom: 15px; line-height: 16px;">Utilizza i pulsanti "-" e "+" per incrementare o decrementare il tuo punteggio.</li>
    </ol>

    <div class="flex-main">

        <div>
            <label for="bonusSelect">Seleziona un Bonus:</label>
            <select id="bonusSelect">
                <!-- Opzioni caricate dinamicamente dal database -->
            </select>
        </div>

        <button class="button" onclick="aggiungiBonusInPagina()">Aggiungi Bonus in Pagina</button>
    </div>

    <div id="bonusContainer"></div>

    <div id="punteggioContainer">
        <button class="button" onclick="sottraiPunti()">-5</button>
        <h2>Punteggio: <span id="punteggio">0</span></h2>
        <button class="button" onclick="aggiungiPunti()">+5</button>
    </div>

    <footer>
        <p>Prodotto da "Il tuo Ciccio di quartiere"</p>
    </footer>

    <script>
        let punteggioAttuale = parseInt(localStorage.getItem('punteggio')) || 0;

        aggiornaPunteggio();

        // Array di bonus dal "database"
        const bonusDatabase = [
            { title: "Out Of Lab", points: 20 },
            { title: "Torre Sprout", points: 25 },
            { title: "Brock", points: 70 },
            { title: "Union Cave", points: 10 },
            { title: "Bugsy", points: 25 },
            { title: "Rivale Post Bugsy", points: 25 },
            { title: "Whitney", points: 15 },
            { title: "Torre Bruciata", points: 10 },
            { title: "Rivale Torre", points: 10 },
            { title: "Mt. Mortar", points: 10 },
            { title: "Faro", points: 10 },
            { title: "Nina", points: 15 },
            { title: "Grotta Celeste", points: 10 },
            { title: "Team Rocket HQ", points: 20 },
            { title: "Erika", points: 20 },
            { title: "Jasmine", points: 35 },
            { title: "Pryce", points: 20 },
            { title: "T. Radio #1", points: 10 },
            { title: "Tunnel e T. Radio #2", points: 25 },
            { title: "Rivale Tunnel", points: 25 },
            { title: "Clair", points: 40 },
            { title: "Kimono", points: 20 },
            { title: "Rivale Via Vittoria", points: 40 },
            { title: "Via Vittoria", points: 20 },
            { title: "Will", points: 100 },
            { title: "Koga", points: 130 },
            { title: "Bruno", points: 160 },
            { title: "Karen", points: 200 },
            { title: "Lance", points: 500 },
            { title: "Blu", points: 350 },
            { title: "Rosso", points: 700 },
            // Aggiungi altri bonus secondo necessità
        ];

        // Popola dinamicamente le opzioni del select
        const bonusSelect = document.getElementById("bonusSelect");
        bonusDatabase.forEach(bonus => {
            const option = document.createElement("option");
            option.text = bonus.title;
            bonusSelect.add(option);
        });

        // Carica bonus salvati nel localStorage
        caricaBonusSalvati();

        function aggiungiBonusInPagina() {
            // Recupera il bonus selezionato
            const selectedBonusIndex = bonusSelect.selectedIndex;
            const selectedBonus = bonusDatabase[selectedBonusIndex];

            // Verifica se il bonus è già presente in pagina
            if (!isBonusPresente(selectedBonus)) {
                // Visualizza il bonus in pagina
                visualizzaBonusInPagina(selectedBonus);

                // Aggiungi il bonus al localStorage
                salvaBonus(selectedBonus);
            } else {
                alert("Questo bonus è già presente in pagina.");
            }
        }

        function isBonusPresente(bonus) {
            const bonusSalvati = JSON.parse(localStorage.getItem('bonusSalvati')) || [];
            return bonusSalvati.some(b => b.title === bonus.title);
        }

        function visualizzaBonusInPagina(bonus) {
            // Crea un elemento div per visualizzare le informazioni del bonus
            const bonusDiv = document.createElement("div");
            bonusDiv.className = "bonusDiv";
            
            bonusDiv.innerHTML = `<strong>${bonus.title}</strong>`;
            bonusDiv.innerHTML += `<span class="bonusPoints">+${bonus.points}</span>`;

            // Aggiungi l'elemento div al container dei bonus
            const bonusContainer = document.getElementById("bonusContainer");
            bonusContainer.appendChild(bonusDiv);

            // Aggiungi l'evento click al div per gestire l'aggiunta dei punti
            bonusDiv.addEventListener("click", function() {
                aggiungiPuntiBonus(bonus.points);

                // Rimuovi il bonus dalla pagina e dal localStorage
                rimuoviBonus(bonusDiv, bonus);
            });
        }

        function aggiungiPuntiBonus(punti) {
            punteggioAttuale += punti;

            // Salva il punteggio nello storage locale
            localStorage.setItem('punteggio', punteggioAttuale);

            // Aggiorna il punteggio visualizzato
            aggiornaPunteggio();
        }

        function aggiungiPunti() {
            // Implementa la logica per sommare i punti del bonus selezionato al punteggio
            // In questo esempio, stiamo semplicemente incrementando il punteggio di 10
            punteggioAttuale += 5;

            // Salva il punteggio nello storage locale
            localStorage.setItem('punteggio', punteggioAttuale);

            // Aggiorna il punteggio visualizzato
            aggiornaPunteggio();
        }

        function sottraiPunti() {
            // Implementa la logica per sottrarre i punti del bonus selezionato al punteggio
            // In questo esempio, stiamo semplicemente sottraendo il punteggio di 5
            punteggioAttuale -= 5;

            // Salva il punteggio nello storage locale
            localStorage.setItem('punteggio', punteggioAttuale);

            // Aggiorna il punteggio visualizzato
            aggiornaPunteggio();
        }

        function caricaBonusSalvati() {
            const bonusSalvati = JSON.parse(localStorage.getItem('bonusSalvati')) || [];
            bonusSalvati.forEach(bonus => {
                visualizzaBonusInPagina(bonus);
            });
        }

        function salvaBonus(bonus) {
            const bonusSalvati = JSON.parse(localStorage.getItem('bonusSalvati')) || [];
            bonusSalvati.push(bonus);
            localStorage.setItem('bonusSalvati', JSON.stringify(bonusSalvati));
        }

        function rimuoviBonus(bonusDiv, bonus) {
            // Recupera l'elemento genitore del bonusDiv
            const bonusContainer = document.getElementById("bonusContainer");

            // Rimuovi il bonusDiv dall'elemento genitore (bonusContainer)
            bonusContainer.removeChild(bonusDiv);

            // Rimuovi il bonus dal localStorage
            const bonusSalvati = JSON.parse(localStorage.getItem('bonusSalvati')) || [];
            const index = bonusSalvati.findIndex(b => b.title === bonus.title);
            if (index !== -1) {
                bonusSalvati.splice(index, 1);
                localStorage.setItem('bonusSalvati', JSON.stringify(bonusSalvati));
            }
        }

        function aggiornaPunteggio() {
            const punteggioElement = document.getElementById("punteggio");
            punteggioElement.textContent = punteggioAttuale;
        }
    </script>

</body>
</html>
